CREATE DATABASE 'D:\ezsem\DB\LOGISTICS3.fdb' user 'SYSDBA' password 'masterkey';
commit;
CONNECT 'D:\ezsem\DB\LOGISTICS3.fdb' user 'SYSDBA' password 'masterkey';

CREATE TABLE SHEDULE (
    ID                 INTEGER NOT NULL,
    ID_TRANSPORTATION  INTEGER NOT NULL,
    ARR_DATE           TIMESTAMP NOT NULL
);

CREATE TABLE TRANSPORTATION (
    ID            INTEGER NOT NULL,
    ID_TRANSPORT  INTEGER NOT NULL,
    ID_ORD        INTEGER NOT NULL
);

CREATE TABLE ORD (
    ID            INTEGER NOT NULL,
    ID_PROVIDER   INTEGER NOT NULL,
    ID_CLIENT     INTEGER NOT NULL,
    ID_LOAD       INTEGER NOT NULL,
    QUANTITY      INTEGER NOT NULL,
    AMOUNT_COST   FLOAT NOT NULL
);

CREATE TABLE LOAD (
    ID        INTEGER NOT NULL,
    NAME      VARCHAR(20) NOT NULL,
    WEIGHT    INTEGER NOT NULL,
    LENGTH    FLOAT NOT NULL,
    WIDTH     FLOAT NOT NULL,
    HEIGHT    FLOAT NOT NULL,
    COST      FLOAT NOT NULL
);

CREATE TABLE PROVIDER (
    ID            INTEGER NOT NULL,
    NAME          VARCHAR(20) NOT NULL,
    SURNAME       VARCHAR(20) NOT NULL,
    OLDNAME       VARCHAR(20),
    FIRM          VARCHAR(20),
    ADDRESS       VARCHAR(100) NOT NULL,
    PHONE_NUMBER  VARCHAR(11) NOT NULL
);

CREATE TABLE CLIENT (
    ID            INTEGER NOT NULL,
    NAME          VARCHAR(20) NOT NULL,
    SURNAME       VARCHAR(20) NOT NULL,
    OLDNAME       VARCHAR(20),
    ADDRESS       VARCHAR(100) NOT NULL,
    PHONE_NUMBER  VARCHAR(11) NOT NULL
);

CREATE TABLE TRANSPORT (
    ID        INTEGER NOT NULL,
    NAME      VARCHAR(20) NOT NULL,
    CAPACITY  INTEGER NOT NULL
);

ALTER TABLE SHEDULE ADD PRIMARY KEY (ID);
ALTER TABLE TRANSPORTATION ADD CONSTRAINT PK_TRANSPORTATION PRIMARY KEY (ID);
ALTER TABLE ORD ADD CONSTRAINT PK_ORDER PRIMARY KEY (ID);
ALTER TABLE LOAD ADD CONSTRAINT PK_LOAD PRIMARY KEY (ID);
ALTER TABLE PROVIDER ADD CONSTRAINT PK_PROVIDER PRIMARY KEY (ID);
ALTER TABLE CLIENT ADD CONSTRAINT PK_CLIENT PRIMARY KEY (ID);
ALTER TABLE TRANSPORT ADD PRIMARY KEY (ID);

ALTER TABLE ORD ADD CONSTRAINT FK_ORD_1 FOREIGN KEY (ID_LOAD) REFERENCES LOAD (ID);
ALTER TABLE ORD ADD CONSTRAINT FK_ORD_2 FOREIGN KEY (ID_CLIENT) REFERENCES CLIENT (ID);
ALTER TABLE ORD ADD CONSTRAINT FK_ORD_3 FOREIGN KEY (ID_PROVIDER) REFERENCES PROVIDER (ID);
 
ALTER TABLE TRANSPORTATION ADD CONSTRAINT FK_TRANSPORTATION_1 FOREIGN KEY (ID_ORD) REFERENCES ORD (ID);
ALTER TABLE TRANSPORTATION ADD CONSTRAINT FK_TRANSPORTATION_2 FOREIGN KEY (ID_TRANSPORT) REFERENCES TRANSPORT (ID);

ALTER TABLE SHEDULE ADD CONSTRAINT FK_SHEDULE_1 FOREIGN KEY (ID_TRANSPORTATION) REFERENCES TRANSPORTATION (ID);

commit;

CONNECT 'D:\ezsem\DB\LOGISTICS2.fdb' user 'SYSDBA' password 'masterkey';

INSERT INTO TRANSPORT VALUES(0, 'GAZ', 2000);
INSERT INTO TRANSPORT VALUES(1, 'Ford', 12000);
INSERT INTO TRANSPORT VALUES(2, 'Kamaz', 10000);
INSERT INTO TRANSPORT VALUES(3, 'ZIL', 6000);
INSERT INTO TRANSPORT VALUES(4, 'MAZ', 4000);

INSERT INTO LOAD VALUES(0, 'Load1', 400, 4, 4, 4, 500);
INSERT INTO LOAD VALUES(1, 'Load2', 40, 5, 2, 3, 100);
INSERT INTO LOAD VALUES(2, 'Load3', 50, 2, 6, 4, 200);
INSERT INTO LOAD VALUES(3, 'Load4', 200, 1, 3, 6, 400);
INSERT INTO LOAD VALUES(4, 'Load5', 100, 7, 4, 3, 250);

INSERT INTO CLIENT VALUES(0, 'Ivan', 'Ivanov', 'Ivanovich', 'Addr1', '89216548778');
INSERT INTO CLIENT VALUES(1, 'Andrey', 'Rusakov', 'Vladimirovich', 'Addr2', '89519876086');
INSERT INTO CLIENT VALUES(2, 'Natalia', 'Kozlovskaya', 'Andreevna', 'Addr3', '89006753123');
INSERT INTO CLIENT VALUES(3, 'Denis', 'Kuzin', 'Alexeevich', 'Addr4', '89846446732');
INSERT INTO CLIENT VALUES(4, 'Angelina', 'Romanova', 'Denisovna', 'Addr5', '89236451290');

INSERT INTO PROVIDER VALUES(0, 'Dmitry', 'Belyaev', 'Antonovich', 'Comp1', 'Addr6', '89513332517');
INSERT INTO PROVIDER VALUES(1, 'Pavel', 'Sobolev', 'Maximovich', 'Comp2', 'Addr7', '89215851022');
INSERT INTO PROVIDER VALUES(2, 'Marina', 'Raskina', 'Grigorevna', 'Comp3', 'Addr8', '89173362399');
INSERT INTO PROVIDER VALUES(3, 'Nikita', 'Malishev', 'Alexandrovich', 'Comp4', 'Addr9', '88002259501');
INSERT INTO PROVIDER VALUES(4, 'Kristina', 'Andronova', 'Egorovna', 'Comp5', 'Addr10', '89525780089');

INSERT INTO ORD VALUES(0, 1, 0, 3, 10, 4000);
INSERT INTO ORD VALUES(1, 2, 4, 1, 20, 2000);
INSERT INTO ORD VALUES(2, 1, 2, 4, 3, 750);
INSERT INTO ORD VALUES(3, 3, 1, 0, 15, 7500);
INSERT INTO ORD VALUES(4, 4, 3, 2, 7, 1400);

INSERT INTO TRANSPORTATION VALUES(0, 2, 3);
INSERT INTO TRANSPORTATION VALUES(1, 3, 0);
INSERT INTO TRANSPORTATION VALUES(2, 2, 4);
INSERT INTO TRANSPORTATION VALUES(3, 3, 2);
INSERT INTO TRANSPORTATION VALUES(4, 0, 1);

INSERT INTO SHEDULE VALUES(0, 1, '29.12.2016 13:34' );
INSERT INTO SHEDULE VALUES(1, 3, '29.12.2016 17:00' );
INSERT INTO SHEDULE VALUES(2, 0, '10.01.2017 10:45' );
INSERT INTO SHEDULE VALUES(3, 2, '10.01.2017 18:21' );
INSERT INTO SHEDULE VALUES(4, 4, '15.01.2017 14:59' );

commit;

